---
title: Multimedia methods to use
---
import { YouTube } from 'astro-embed';

With the more interactive programs using SplashKit there are now a whole range of methods that we can use to check for user inputs, and to help test different aspect of our game (such as time passing, and detecting collisions).

The methods we will need in this chapter include:

- Event loop methods:
  - [Process Events](https://splashkit.io/api/input/#process-events) - listens for actions that the user has performed such as keystrokes, mouse clicks, quitting, etc.
  - [Quit Requested](https://splashkit.io/api/input/#quit-requested) - returns true when the user has asked to close the program.

- Key input methods:
  - [Key Down](https://splashkit.io/api/input/#key-down) - allows you to test if a key is held down.

- Random number methods:
  - [Rnd](https://splashkit.io/api/utilities/#rnd-functions) - Generate a random number.

- Time management methods:
  - [Create Timer](https://splashkit.io/api/timers/#create-timer) - create a timer to keep track of time.
  - [Start Timer](https://splashkit.io/api/timers/#start-timer-functions) - start a timer ticking. You can then query it for how long has passed since it was started.
  - [Timer Ticks](https://splashkit.io/api/timers/#timer-ticks-functions) - tells you how long has passed since the timer was started.

- Collision detection methods:
  - [Circles Intersect](https://splashkit.io/api/geometry/#circles-intersect-using-values) - test if two circles intersect.
  - [Triangle Rectangle Intersect](https://splashkit.io/api/geometry/#triangle-rectangle-intersect) - test if a triangle and rectangle intersect.
  - [Rectangle From](https://splashkit.io/api/geometry/#rectangle-from) - create a rectangle from a given point, width, and height.
  - [Triangle From](https://splashkit.io/api/geometry/#triangle-from-coordinates) - create a triangle from a given set of points.

These methods have the following declarations:

```c++
// These need...
// #include "splashkit.h"

// Event loop
void process_events();
bool quit_requested();

// Key input
bool key_down(key_code key);

// Random numbers
float rnd(); // 0 to 1
int rnd(int ubound); // 0 to ubound - 1
int rnd(int min, int max); // min to max


// Time tracking
timer create_timer(string name);
void start_timer(string name);
uint timer_ticks(string name);

// Collision detection
bool circles_intersect(double c1_x, double c1_y, double c1_radius, double c2_x, double c2_y, double c2_radius);
bool triangle_rectangle_intersect(triangle tri, rectangle rect);
rectangle rectangle_from(double x, double y, double width, double height);
triangle triangle_from(double x1, double y1, double x2, double y2, double x3, double y3);
```

### Key Codes

For the `key_down` method, you need to tell it which key you are wanting to check. SplashKit provides a list of key codes in a `key_code` type, which provides a list of values you can choose from. You should be able to see these in VS Code using its IntelliSense.

The main options include:

||||||
|--|--|--|--|--|
| BACKSPACE_KEY | TAB_KEY | RETURN_KEY | ESCAPE_KEY | SPACE_KEY |
| NUM0_KEY | NUM1_KEY | NUM2_KEY | NUM3_KEY | NUM4_KEY |
| NUM5_KEY | NUM6_KEY | NUM7_KEY | NUM8_KEY | NUM9_KEY |
| COLON_KEY | SEMI_COLON_KEY | A_KEY | B_KEY | C_KEY |
| D_KEY | E_KEY | F_KEY | G_KEY | H_KEY |
| I_KEY | J_KEY | K_KEY | L_KEY | M_KEY |
| N_KEY | O_KEY | P_KEY | Q_KEY | R_KEY |
| S_KEY | T_KEY | U_KEY | V_KEY | W_KEY |
| X_KEY | Y_KEY | Z_KEY | DELETE_KEY | KEYPAD0 |
| KEYPAD1 | KEYPAD2 | KEYPAD3 | KEYPAD4 | KEYPAD5 |
| KEYPAD6 | KEYPAD7 | KEYPAD8 | KEYPAD9 | KEYPAD_PERIOD |
| KEYPAD_DIVIDE | KEYPAD_MULTIPLY | KEYPAD_MINUS | KEYPAD_PLUS | KEYPAD_ENTER |
| KEYPAD_EQUALS | UP_KEY | DOWN_KEY | RIGHT_KEY | LEFT_KEY |
| INSERT_KEY | HOME_KEY | END_KEY | PAGE_UP_KEY | PAGE_DOWN_KEY |
| F1_KEY | F2_KEY | F3_KEY | F4_KEY | F5_KEY |
| F6_KEY | F7_KEY | F8_KEY | F9_KEY | F10_KEY |
| F11_KEY | F12_KEY | F13_KEY | F14_KEY | F15_KEY |
| RIGHT_SHIFT_KEY | LEFT_SHIFT_KEY | RIGHT_CTRL_KEY | LEFT_CTRL_KEY | RIGHT_ALT_KEY |
| LEFT_ALT_KEY | LEFT_SUPER_KEY | RIGHT_SUPER_KEY | | |

### Mouse Buttons and Methods

SplashKit also includes a number of methods for working with the mouse. These include the following:

```cs
// These methods need
// #include "splashkit.h"

// Was a given button on the mouse clicked?
bool mouse_clicked(mouse_button button);
// Is a given button in the mouse current held down?
bool mouse_down(mouse_button button);

// Where is the mouse - relative to the left side of the window?
float mouse_x();
// Where is the mouse - relative to the top of the window?
float mouse_y();
```

For these you will need to use the `mouse_button` data.

There are the following mouse button values:

- `LEFT_BUTTON` for the left mouse button
- `MIDDLE_BUTTON` for the middle mouse button
- `RIGHT_BUTTON` for the right mouse button
- `MOUSE_X1_BUTTON` for the x1 mouse button
- `MOUSE_X2_BUTTON` for the x2 mouse button

See the example code below to see how these can be used.

### Example Multimedia Code

Here is some example multimedia code that creates a program where the user is able to move a shape around on the screen.

```c++
#include "splashkit.h"

const int MOVE_SPEED = 3;

int main()
{
    open_window("Movement", 800, 600);

    // Event loop
    double x = 400;
    color clr = COLOR_BLACK;

    while( !quit_requested() )
    {
      process_events();

      if (key_down(RIGHT_KEY))
      {
        x += MOVE_SPEED;
      }

      if (key_down(LEFT_KEY))
      {
        x -= MOVE_SPEED;
      }

      if (key_typed(SPACE_KEY))
      {
        clr = random_color();
      }

      clear_screen(COLOR_WHITE);
      fill_circle(clr, x, 300, 50);
      refresh_screen(60);
    }
}
```

The following code shows an example of using the mouse, and its position as part of a program. This uses the distance from the player to the mouse to set the direction of a ball which is thrown when the mouse is clicked.

```c++
#include "splashkit.h"

const int BALL_RADIUS = 5;
const int PLAYER_RADIUS = 20;

int main()
{
    // Used to calculate distance from player - mouse for
    // Ball speed. speed = distance / DIST_TO_SPEED_RATIO.
    const double DIST_TO_SPEED_RATIO = 30;
    // as above for the line drawn to show direction of shot
    const double DIST_LINE_RATIO = 10;

    open_window("Ball Throw", 800, 600);

    bool ball_fired = false;

    double player_x = 400, player_y = 300;
    double ball_x = player_x;
    double ball_y = player_y;
    double ball_x_speed = 0;
    double ball_y_speed = 0;

    while (!quit_requested())
    {
      process_events();

      if (mouse_clicked(LEFT_BUTTON) && !ball_fired)
      {
        ball_fired = true;

        // calculate velocity for the BALL
        ball_x_speed = (mouse_x() - player_x) / DIST_TO_SPEED_RATIO;
        ball_y_speed = (mouse_y() - player_y) / DIST_TO_SPEED_RATIO;
      }

      if (ball_fired)
      {
        // Move the projective by its x and y speed
        ball_x += ball_x_speed;
        ball_y += ball_y_speed;

        // check if off screen
        if (ball_x + BALL_RADIUS < 0 || // off left
            ball_x - BALL_RADIUS > screen_width() || // off right
            ball_y + BALL_RADIUS < 0 || // off top
            ball_y - BALL_RADIUS > screen_height()
            ) // off bottom
        {
          ball_fired = false;
          ball_x = player_x;
          ball_y = player_y;
        }
      }

      clear_screen(COLOR_WHITE);
      fill_circle(COLOR_LIGHT_GREEN, player_x, player_y, PLAYER_RADIUS);
      fill_circle(COLOR_BLACK, ball_x, ball_y, BALL_RADIUS);

      if ( ! ball_fired )
      {
        // Show direction of travel
        draw_line(COLOR_BLACK,
          player_x, player_y,
          player_x + (mouse_x() - player_x) / DIST_LINE_RATIO,
          player_y + (mouse_y() - player_y) / DIST_LINE_RATIO
        );
      }

      refresh_screen(60);
    }
}
```
