---
title: Giving change
sidebar:
  label: " - Giving change"
banner: 
  content: This is an optional tour - use it to extend your understanding.
---
import { Accordion, AccordionItem } from 'accessible-astro-components'

We can use a flowchart to help us capture the sequence we need to perform in the change calculator.

:::note
The use of a box with a dotted outline to capture and label related group of instructions -- this is often a helpful addition to the readability of a flow chart.
:::

![The flowchart showing the sequence of steps from the current change calculator code](./images/change-calc-1-sequence.png)

When we code this we want to try to avoid duplication. Instead of repeating code, over and over, to give different change values, we can use control flow and code this up as general instructions.

This will be a common theme as we go forward. In order to create more interesting programs, we need to start using data together with the control flow statements. By doing this you can then change the data, and the processing should work with the new context.

For example, the change calculator currently works with Australian currency. If we could move this to pure data, then we could shift to American currency by just changing the data that informs this control flow.

:::tip
Empowering data allows you to create efficient and powerful software. Learning to start making these changes now will help you see the possibilities. This is all about starting to raise the level of **abstraction**, and building more comprehensive digital realities.
:::

## Steps to give change

Let's quickly think through the steps needed to give change. We can think of this as the following sequence.

```txt
Give $2 coins - the largest value coin first!
    Calculate the number of $2 coins to give (change_value / 200)
    Update the amount of change remaining to give
    Output the number of $2

Give $1 coins
    Calculate the number of $1 coins to give
    Update the amount of change remaining to give
    Output the number of $1

Give 50c coins
    Calculate the number of 50c coins to give
    Update the amount of change remaining to give
    Output the number of 50c

Give 20c coins
    Calculate the number of 20c coins to give
    Update the amount of change remaining to give
    Output the number of 20c

Give 10c coins
    Calculate the number of 10c coins to give
    Update the amount of change remaining to give
    Output the number of 10c

Give 5c coins
    Calculate the number of 5c coins to give
    Update the amount of change remaining to give
    Output the number of 5c
```

Notice that each coin we give has the same steps. The only difference is the **value** of the coin and the **text** that is used when this is output. For example, with the 20c coin we need to know the value of the coin is 20 and the text is "20c". So the steps can be:

```txt
Calculate the number of coins to give using the coin_value.
Update the amount of change remaining
Output the number of coins with the coin text
```

This can be implemented in C++ using variables as:

```c++
// Calculate the number of coins to give using the coin_value.
to_give = change_value / coin_value;

// Update the amount of change remaining
change_value = change_value - to_give * coin_value;

// Output the number of coins with the coin text
write(to_string(to_give) + " x " + to_string(coin_text));
```

Notice this does not mention any specific coin or literal value, and allows us to work with *any* coin value.

Let's put this in our code and calculate how many $2 coins to give.

1. Create the `to_give`, `coin_value`, and `coin_text` variables.
2. After calculating the change value, initialise `coin_value` to 200 and `coin_text` to "$2". Then add the above code to calculate how many coins to give.

    Compile and run your program, and then test that it can output the right number of $2 coins for a range of different change values.

    <Accordion>
      <AccordionItem header="Code to give $2 coins">

      ```c++ {9-11,38-48}
      #include "splashkit.h"

      int main()
      {
          string line;
          int cost_of_item;
          int amount_paid;
          int change_value;
          int to_give;
          int coin_value;
          string coin_text;

          write("Cost of item in cents: ");
          line = read_line();
          while (!is_integer(line))
          {
              write_line("Please enter a whole number.");
              write("Cost of item in cents: ");
              line = read_line();
          }

          cost_of_item = to_integer(line);

          write("Payment in cents: ");
          line = read_line();
          while (!is_integer(line))
          {
              write_line("Please enter a whole number.");
              write("Payment in cents: ");
              line = read_line();
          }

          amount_paid = to_integer(line);

          change_value = amount_paid - cost_of_item;
          write_line("Change to give " + to_string(change_value));

          coin_value = 200;
          coin_text = "$2";

          // Calculate the number of coins to give using the coin_value.
          to_give = change_value / coin_value;

          // Update the amount of change remaining
          change_value = change_value - to_give * coin_value;

          // Output the number of coins with the coin text
          write(to_string(to_give) + " x " + coin_text);
      }
      ```

      </AccordionItem>
    </Accordion>

    When you run this you should see something like this:

    ```bash
    Cost of item in cents: 0
    Payment in cents: 650
    Change to give 650
    3 x $2
    ```

3. Now, add in constants for each of the coin values, and we can add in a constant for the number of coins.

    <Accordion>
      <AccordionItem header="Constants for coins">

      ```c++ {3-10,47}
      #include "splashkit.h"

      const int NUM_COIN_TYPES = 6;

      const int TWO_DOLLARS = 200;
      const int ONE_DOLLAR = 100;
      const int FIFTY_CENTS = 50;
      const int TWENTY_CENTS = 20;
      const int TEN_CENTS = 10;
      const int FIVE_CENTS = 5;

      int main()
      {
          string line;
          int cost_of_item;
          int amount_paid;
          int change_value;
          int to_give;
          int coin_value;
          string coin_text;

          write("Cost of item in cents: ");
          line = read_line();
          while (!is_integer(line))
          {
              write_line("Please enter a whole number.");
              write("Cost of item in cents: ");
              line = read_line();
          }

          cost_of_item = to_integer(line);

          write("Payment in cents: ");
          line = read_line();
          while (!is_integer(line))
          {
              write_line("Please enter a whole number.");
              write("Payment in cents: ");
              line = read_line();
          }

          amount_paid = to_integer(line);

          change_value = amount_paid - cost_of_item;
          write_line("Change to give " + to_string(change_value));

          coin_value = TWO_DOLLARS;
          coin_text = "$2";

          // Calculate the number of coins to give using the coin_value.
          to_give = change_value / coin_value;

          // Update the amount of change remaining
          change_value = change_value - to_give * coin_value;

          // Output the number of coins with the coin text
          write(to_string(to_give) + " x " + coin_text);
      }
      ```

      </AccordionItem>
    </Accordion>

4. Now we can **repeat** the code to calculate the change, once for each coin. We can use a [for loop](/book/part-1-instructions/3-control-flow/5-reference/04-3-for-loop) to achieve this, as there is a set number of coins that we need to iterate through. This gives us the following pseudocode:

    ```txt
    for each kind of coin
        ...
        Calculate the number of coins to give using the coin_value.
        Update the amount of change remaining
        Output the number of coins with the coin_text
    ```

    Have a go at adding this loop in, and for the moment it can give $2 multiple times. You will need to add in an `i` variable to keep track of the number of times through the loop.

    <Accordion>
      <AccordionItem header="Constants with coins loop">

        ```c++ {47-48,60}
        #include "splashkit.h"

        const int NUM_COIN_TYPES = 6;

        const int TWO_DOLLARS = 200;
        const int ONE_DOLLAR = 100;
        const int FIFTY_CENTS = 50;
        const int TWENTY_CENTS = 20;
        const int TEN_CENTS = 10;
        const int FIVE_CENTS = 5;

        int main()
        {
            string line;
            int cost_of_item;
            int amount_paid;
            int change_value;
            int to_give;
            int coin_value;
            string coin_text;

            write("Cost of item in cents: ");
            line = read_line();
            while (!is_integer(line))
            {
                write_line("Please enter a whole number.");
                write("Cost of item in cents: ");
                line = read_line();
            }

            cost_of_item = to_integer(line);

            write("Payment in cents: ");
            line = read_line();
            while (!is_integer(line))
            {
                write_line("Please enter a whole number.");
                write("Payment in cents: ");
                line = read_line();
            }

            amount_paid = to_integer(line);

            change_value = amount_paid - cost_of_item;
            write_line("Change to give " + to_string(change_value));

            for(int i = 0; i < NUM_COIN_TYPES; i++)
            {

                coin_value = TWO_DOLLARS;
                coin_text = "$2";

                // Calculate the number of coins to give using the coin_value.
                to_give = change_value / coin_value;

                // Update the amount of change remaining
                change_value = change_value - to_give * coin_value;

                // Output the number of coins with the coin text
                write(to_string(to_give) + " x " + coin_text);
            }
        }
        ```
      </AccordionItem>
    </Accordion>

    :::tip
    You can read a for loop as "for [initializer] while [condition], then [increment]" (at the end of each loop). So this for loop is:

    for i = 0; **while** i < NUM_COIN_TYPE; **then** i++
    :::

    When you run this it should output 6 coin values, but they are all $2.

5. To wrap this up we need to set the values for `coin_value` and `coin_text`. We can use the control variable `i` to determine which values to use. When `i` is 0, we need to use $2, when it is 1 we need to use $1, and so on.

    This is a great example of where we can use a [case statement](/book/part-1-instructions/3-control-flow/5-reference/03-2-case). The following pseudocode shows how this might look:

    ```txt
    for each kind of coin (i loops 0 to 5... while < 6)
        Switch based on i
            when 0, coin_value is 200, and coin_text is "$2"
            when 1, coin_value is 100, and coin_text is "$1"
            when 2, coin_value is 50, and coin_text is "50c"
            when 3, coin_value is 20, and coin_text is "20c"
            when 4, coin_value is 10, and coin_text is "10c"
            when 5, coin_value is 5, and coin_text is "5c"

        Calculate the number of coins to give using the coin_value.
        Update the amount of change remaining
        Output the number of coins with the coin_text
    ```

    Have a go at adding this logic to your program.

    <Accordion>
      <AccordionItem header="Selecting the coin value">

    ```c++ {49-79}
    #include "splashkit.h"

    const int NUM_COIN_TYPES = 6;

    const int TWO_DOLLARS = 200;
    const int ONE_DOLLAR = 100;
    const int FIFTY_CENTS = 50;
    const int TWENTY_CENTS = 20;
    const int TEN_CENTS = 10;
    const int FIVE_CENTS = 5;

    int main()
    {
        string line;
        int cost_of_item;
        int amount_paid;
        int change_value;
        int to_give;
        int coin_value;
        string coin_text;

        write("Cost of item in cents: ");
        line = read_line();
        while (!is_integer(line))
        {
            write_line("Please enter a whole number.");
            write("Cost of item in cents: ");
            line = read_line();
        }

        cost_of_item = to_integer(line);

        write("Payment in cents: ");
        line = read_line();
        while (!is_integer(line))
        {
            write_line("Please enter a whole number.");
            write("Payment in cents: ");
            line = read_line();
        }

        amount_paid = to_integer(line);

        change_value = amount_paid - cost_of_item;
        write_line("Change to give " + to_string(change_value));

        for(int i = 0; i < NUM_COIN_TYPES; i++)
        {
            switch (i)
            {
                case 0:
                    coin_value = TWO_DOLLARS;
                    coin_text = "$2, ";
                    break;
                case 1:
                    coin_value = ONE_DOLLAR;
                    coin_text = "$1, ";
                    break;
                case 2:
                    coin_value = FIFTY_CENTS;
                    coin_text = "50c, ";
                    break;
                case 3:
                    coin_value = TWENTY_CENTS;
                    coin_text = "20c, ";
                    break;
                case 4:
                    coin_value = TEN_CENTS;
                    coin_text = "10c, ";
                    break;
                case 5:
                    coin_value = FIVE_CENTS;
                    coin_text = "5c";
                    break;
                default:
                    coin_value = 1;
                    coin_text = "ERROR";
                    break;
            }

            // Calculate the number of coins to give using the coin_value.
            to_give = change_value / coin_value;

            // Update the amount of change remaining
            change_value = change_value - to_give * coin_value;

            // Output the number of coins with the coin text
            write(to_string(to_give) + " x " + coin_text);
        }
    }
    ```

      </AccordionItem>
    </Accordion>

    Compile and run your program, making sure that it outputs the right change for the values you enter.
