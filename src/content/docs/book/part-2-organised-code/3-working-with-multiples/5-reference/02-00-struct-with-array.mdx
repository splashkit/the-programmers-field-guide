---
title: Better Managing Arrays
sidebar:
    label: "Array in a Struct"
---

One effective way to work with arrays in C/C++ is to place the array and its size into a struct. This allows you to keep the data and the number of elements that is has nicely together. You can then also use the size to give you the capability of adjusting the number of elements you are using, by changing the value of the array's size. With this, you can then grow and shrink the size of the array, up to a set maximum number of elements.

The following illustrates the code and how to think about a struct that contains an array:

![An illustration of code and the conceptual model for a struct that contains an array.](./images/struct-array.png)

:::note

- You still need to set the maximum size for the array within the struct - so it has a fixed size. A constant works well to make sure this is consistent throughout your program.
- Within the struct you have:
  - a field to store the array. This will have space to store a number of elements, based on the maximum number you set.
  - a size integer field. This will store the number of elements used within the array field. This way you can change the array from have between 0 and the maximum number of elements based on your constant.
- As this is now a struct, you can pass it by value or by reference. So make sure to use references when passing this around in your code.

:::

## Example

```cpp
#include "splashkit.h"
#include "utilities.h"

// The maximum number of values we can store
const int MAX_NUMBERS = 20;

/**
 * The data structure to store the numbers
 *
 * @field values the array of values
 * @field size the number of values in the array - up to MAX_NUMBERS
 */
struct number_data
{
  double values[MAX_NUMBERS];
  int size;
};

/**
 * Populate a number of elements of the array with values entered by the user
 *
 * @param data the array of values (passed by reference)
 * @param size the number of elements to initialise
 */
void populate_array(number_data &data, int size)
{
  if (size > MAX_NUMBERS)
  {
    write_line("Sorry, you can only enter " + to_string(MAX_NUMBERS) + " values.");
    size = MAX_NUMBERS;
  }
  else if (size < 0)
  {
    size = 0;
  }

  data.size = size;

  // Populate each element - up to data.size
  for (int i = 0; i < data.size; i++)
  {
    data.values[i] = read_double("Enter value: ");
  }
}


/**
 * Populate the array with values entered by the user
 *
 * @param data the array of values (passed by reference)
 */
void populate_array(number_data &data)
{
  int size = read_integer("How many values do you want to enter? ");
  populate_array(data, size);
}

/**
* Get numbers returns an initialised number data struct.
*/
number_data get_numbers(int count)
{
  number_data result;
  // Ensure count is <= MAX_NUMBER_DATA_VALUES
  if (count > MAX_NUMBER_DATA_VALUES)
  {
    count = MAX_NUMBER_DATA_VALUES;
  }
  
  populate(result, count);
  
  // You cannot return an array, but you can return a struct
  // that contains an array
  return result;
}


int main()
{
  // Initialise struct with an empty array and a size of 0.
  number_data data = {{},0};

  // You can pass to a procedure by reference, and have it update
  populate_array(data);

  // Access elements within the struct's values field
  // and update its size to match
  data.values[0] = read_double("Enter a value: ");
  data.size = 1;

  data.values[1] = read_double("Enter a value: ");
  data.size = 2;

  // Output details about the size and one of the values
  write_line("Size is " + to_string(data.size));
  write_line("Element 1 is " + to_string(data.values[0]));

  return 0;
}
```
