---
title: Pass by Value or Reference
---


import MySwiper from '../../../../../../components/react/myswiper.jsx'

import sliderPassByRef01 from './images/slider-pass-by-reference/Slide1.png';
import sliderPassByRef02 from './images/slider-pass-by-reference/Slide2.png';
import sliderPassByRef03 from './images/slider-pass-by-reference/Slide3.png';
import sliderPassByRef04 from './images/slider-pass-by-reference/Slide4.png';
import sliderPassByRef05 from './images/slider-pass-by-reference/Slide5.png';
import sliderPassByRef06 from './images/slider-pass-by-reference/Slide6.png';
import sliderPassByRef07 from './images/slider-pass-by-reference/Slide7.png';
import sliderPassByRef08 from './images/slider-pass-by-reference/Slide8.png';
import sliderPassByRef09 from './images/slider-pass-by-reference/Slide9.png';
import sliderPassByRef10 from './images/slider-pass-by-reference/Slide10.png';
import sliderPassByRef11 from './images/slider-pass-by-reference/Slide11.png';
import sliderPassByRef12 from './images/slider-pass-by-reference/Slide12.png';
import sliderPassByRef13 from './images/slider-pass-by-reference/Slide13.png';
import sliderPassByRef14 from './images/slider-pass-by-reference/Slide14.png';
import sliderPassByRef15 from './images/slider-pass-by-reference/Slide15.png';
import sliderPassByRef16 from './images/slider-pass-by-reference/Slide16.png';

export const sliderPassByRef = [
  {
    src: sliderPassByRef01.src,
    altText: "The program begins at main(), with lines 3 and 4 declaring and initializing two int variables 'val' and 'other' on the stack. Notice that when the variables are created on the stack, they have a memory address associated with them.",
    tipStart: 1,
    tips: [
      "The program begins at main(), with lines 3 and 4 declaring and initializing two int variables '<strong>val</strong>' and '<strong>other</strong>' on the stack",
      "Notice that when the variables are created on the stack, they have a memory address associated with them"
    ]
  },
  {
    src: sliderPassByRef02.src,
    altText: "Line 5 prints the value of 'val' to the terminal",
    tipStart: 2,
    tips: [
      "Line 5 prints the value of <strong>val</strong> to the terminal"
    ]
  },
  {
    src: sliderPassByRef03.src,
    altText: "Line 6 then contains a call to the function <strong>double_it</strong>, which is passed the variable 'val' as a parameter",
    tipStart: 3,
    tips: [
      "Line 6 then contains a call to the function <strong>double_it</strong>, which is passed the variable <strong>val</strong> as a parameter"
    ]
  },
  {
    src: sliderPassByRef04.src,
    altText: "double_it is called and receives the parameter 'val' as 'call by reference'. This means that instead of storing a copy of the value of 'val', it stores the 'address' of val'. Any operations using data in 'double_it()', will be therefore operating on val in main().",
    tipStart: 4,
    tips: [
      "<strong>double_it()</strong> is called and receives '<strong>val</strong>' as '<em>call by reference</em>' into the parameter <strong>data</strong> (as indicated by the ampersand)",
      "This means that instead of storing a <em>copy of the value</em>  of '<strong>val</strong>', it stores the <em>address</em> of <strong>val</strong> in <strong>data</strong>",
      "Now, any operations using <strong>data</strong> in '<strong>double_it()</strong>', will be effectively referring to <strong>val</strong> in <strong>main()</strong><ul><li><strong>NOTE:</strong> This is because C++ will automatically dereference the address stored in data, when you use it</li></ul>"
    ]
  },
  {
    src: sliderPassByRef05.src,
    altText: "Line 12 prints the (dereferenced) value of <strong>data</strong> (i.e. the value of <strong>val</strong>) to the terminal",
    tipStart: 5,
    tips: [
      "Line 12 prints the (dereferenced) value of <strong>data</strong> (i.e. the value of <strong>val</strong>) to the terminal"
      
    ]
  },
  {
    src: sliderPassByRef06.src,
    altText: "Line 13 doubles the value of <strong>data (val)</strong>, and stores it back in the same variable",
    tipStart: 6,
    tips: [
      "Line 13 doubles the (dereferenced) value of <strong>data (val)</strong>, and stores it back in the same variable"
    ]
  },
  {
    src: sliderPassByRef07.src,
    altText: "Line 14 writes the new value of <strong>data (val)</strong> to the terminal",
    tipStart: 7,
    tips: [
      "Line 14 writes the new (dereferenced) value of <strong>data (val)</strong> to the terminal",
      
    ]
  },
  {
    src: sliderPassByRef08.src,
    altText: "The call to double_it ends, and control returns to <strong>main</strong>. The data variable is removed from the stack",
    tipStart: 8,
    tips: [
      "The call to <strong>double_it()</strong> ends, and control returns to <strong>main</strong>",
      "The <strong>data</strong> variable is removed from the stack"
    ]
  },
  {
    src: sliderPassByRef09.src,
    altText: "The new value of val is written to the terminal. You can see that the doubling operation performed by the call to double_it() has changed the value of val in main()",
    tipStart: 9,
    tips: [
      "The new value of <strong>val</strong> is written to the terminal",
      "You can see that the doubling operation performed by the call to <strong>double_it()</strong> has changed the value of <strong>val</strong> in <strong>main()</strong>"
      
    ]
  },
  {
    src: sliderPassByRef10.src,
    altText: "Line 8 contains another call to double_it, this time passing the variable other as a parameter",
    tipStart: 10,
    tips: [
      "Line 8 contains another call to <strong>double_it()</strong>, this time passing the variable <strong>other</strong> as a parameter",
      
    ]
  },
  {
    src: sliderPassByRef11.src,
    altText: "Once again, the local variable data in the double_it function stores a pointer to the variable 'other' in main",
    tipStart: 11,
    tips: [
      "Once again, the local variable <strong>data</strong> in the <strong>double_it()</strong> function stores a pointer to the variable <strong>other</strong> in <strong>main()</strong>",
      
    ]
  },
  {
    src: sliderPassByRef12.src,
    altText: "Line 12 writes the (dereferenced) value of data to the terminal",
    tipStart: 12,
    tips: [
      "Line 12 writes the (dereferenced) value of <strong>data</strong> to the terminal",
      
    ]
  },
  {
    src: sliderPassByRef13.src,
    altText: "Line 13 doubles the (dereferenced) value of data and stores it back in data",
    tipStart: 13,
    tips: [
      "Line 13 doubles the (dereferenced) value of <strong>data</strong> and stores it back in <strong>data</strong>",
      
    ]
  },
  {
    src: sliderPassByRef14.src,
    altText: "Line 14 writes the new (dereferenced) value of data< to the terminal",
    tipStart: 14,
    tips: [
      "Line 14 writes the new (dereferenced) value of <strong>data</strong> to the terminal",
      
    ]
  },
  {
    src: sliderPassByRef15.src,
    altText: "The double_it function returns, and the data variable is wiped from the stack",
    tipStart: 15,
    tips: [
      "The <strong>double_it()</strong> function returns, and the <strong>data</strong> variable is wiped from the stack",
      
    ]
  },
  {
    src: sliderPassByRef16.src,
    altText: "The main() function ends, and it's variables are also wiped from the stack, ending the program",
    tipStart: 16,
    tips: [
      "The <strong>main()</strong> function ends, and it's variables are also wiped from the stack, ending the program",
      
    ]
  }
];



There are actually two ways that values can be passed to parameters: **pass by value** and **pass by reference**.

So far we have been using pass by value for all of our parameters. With pass by value, the parameter receives a copy of the **value** passed in the argument. In this case, any expression is evaluated first, and the value copied across.

With pass by reference you have to pass a variable, a location to store a value. Pass by reference allows you to pass across a location where a value can be stored, and from which a value can be read.


![Shows you can pass a variable to a by reference parameter](./images/pass-by-reference-idea.png)

## By Reference - Why, When, and How

You can use pass by reference for a couple of purposes:

- To allow the called function or procedure to update the value passed.
- To improve performance when passing large data structures.

### Updating passed values

Breaking up our code into smaller functions and procedures is really important to help us build and manage the code in larger programs. So far, parameters have allowed us to pass values into these functions/procedures but we in some cases we also want that code to update variables that we pass it.

With pass by reference, you can create functions and procedures that can update the variables passed to it. In most cases these will be procedures, where the action performed has a side effect on the parameter passed in. For example, in our fly game we could create a `handle_input` procedure that is passed the `spider` to update. In `handle_input`, the code can read and change the data passed to it, allowing it to update the position of the spider in response to user input.

### Improve performance

When we started using parameters we were passing simple data values like individual numbers, but with structs these parameters can now be passed potentially large volumes of data. Copying this data in by value takes time, as the computer has to duplicate all the information in the struct to copy it by value.

References are achieved by passing the address of the variable passed to it. This is always the same size, and can be passed efficiently to the parameter. For example, in `draw_game` we need to pass all the data associated with the game. You can pass this by reference to save time duplicating the game.

In these instances you can indicate that you want to pass these as constant references, ensuring that the caller does not change the value passed to it.

## In C++

:::tip[Syntax]

![Syntax for a parameter to accept a reference](./images/cpp-fn-decl-with-by-ref.png)

Pass by reference is achieved by adding an ampersand `&` before the parameter name. This indicates that the parameter is to be passed the **address of** a variable. This syntax mimics the syntax used to get the address of a variable in C.

You can also add a `const` before the type name to indicate that you do not want to allow this parameter to be able to change the value passed to it.

:::

## Example

```cpp
#include <splashkit.h>

using std::to_string;

void double_it(int &data)
{
  write_line("Data passed in was " + to_string(data) + ", about to double it...");
  data = data * 2;
  write_line("In double_it data is now " + to_string(data));
}

int main()
{
  int val = 3;
  int other = 1;
    
  write_line("In main val is " + to_string(val));
  double_it(val);
  write_line("Back in main val is now " + to_string(val));
  double_it(other);
}
```

This will output the following when run. Notice that the value in the `val` variable in main is updated, as will the value in the `other` variable. Also notice that there is no special syntax needed in the function call, though you have to pass it a variable. Trying to pass this an expression like `other + 1` would fail with a compiler error, as a parameter passed by reference requires a variable not just a value passed to it.

```
In main val is 3
Data passed in was 3, about to double it...
In double_it data is now 6
Back in main val is now 6
Data passed in was 1, about to double it...
In double_it data is now 2
```

## By Reference Up Close

<MySwiper client:only height="" images={sliderPassByRef}></MySwiper>

:::note[Summary]
- Pass by reference and pass by value are **terms** that explain how data is passed to a parameter.
- Most parameters are passed by value.
- Pass by value copies the value to the parameter. This means pass by value can work with any expression, as the value can be calculated and passed to the parameter.
- You can think of pass by reference as passing the variable itself to the parameter.
- The main use for pass by reference is to allow the procedure or function to store a value in the variable passed to the parameter.
- It is called pass by reference due to the way it is implemented, with the parameter receiving a *reference* to the variable.
:::
