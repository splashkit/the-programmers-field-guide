---
title: Control a Servo
sidebar:
  attrs:
    class: pi
  label: " - Servo Control"
---

import { Accordion, AccordionItem } from "accessible-astro-components";

import { Steps } from "@astrojs/starlight/components";

![servo-banner](./images/servo-banner.gif)

# Overview

In this guide, we’ll learn how to control a standard hobby servo (for example, the SG90) on your Raspberry Pi using SplashKit’s C++ API. Under the hood, SplashKit manages the PWM setup for you at a 50 Hz refresh rate. You simply specify the desired shaft angle (0–180°) and SplashKit converts that to the correct pulse width.

# Hardware Setup

You will need:

- **Servo motor** (e.g. SG90)
- **Breadboard & Jumper Wires**
- **5 V power supply** (external recommended)
- **Raspberry Pi GPIO pin with hardware PWM** (GPIO 18, physical pin 12)

### Wiring

1. **Ground** (servo brown) → Raspberry Pi GND
2. **Power** (servo red) → 5 V
3. **Signal** (servo orange/yellow) → GPIO 18 (Pin 12)

---

# 1. Initialization

```cpp
#include "splashkit.h"
#include <iostream>

int main()
{
    // 1) Initialize the GPIO/PWM subsystem
    raspi_init();

    // 2) Open a tiny window so we can use delay() and read_line()
    open_window("Servo Control", 1, 1);
```

---

# 2. Open the Servo

```cpp
    // 3) Attach your servo on board‐pin 12 (GPIO 18)
    servo_device arm = open_servo("arm_servo", PIN_12);
```

---

# 3. Sweep the Servo

We’ll prompt you to press Enter, then sweep through 0°, 90°, and 180° with a 1 s pause at each.

```cpp
    std::cout << "Press Enter to start...\n";
    read_line();
    std::cout << "Sweeping...\n";

    set_servo_angle(arm, 0.0);   // move to 0°
    delay(1000);

    set_servo_angle(arm, 90.0);  // move to 90°
    delay(1000);

    set_servo_angle(arm, 180.0); // move to 180°
    delay(1000);
```

---

# 4. Clean Up

```cpp
    // Stop the servo and tidy up
    stop_servo(arm);
    close_all_servos();
    raspi_cleanup();
    return 0;
}
```

---

# Full Code Example

<Accordion>
  <AccordionItem header="Full Code (C++)">

```cpp
#include "splashkit.h"
#include <iostream>

int main()
{
    // Initialize GPIO/PWM
    raspi_init();
    open_window("Servo Control", 1, 1);

    // Open the servo on GPIO 18 (board pin 12)
    servo_device arm = open_servo("arm_servo", PIN_12);

    // Prompt & sweep
    write_line("Press Enter to start...\n");
    read_line();
    write_Line("Sweeping through 0°, 90°, 180°...\n");

    set_servo_angle(arm, 0.0);   // 0°
    delay(1000);
    set_servo_angle(arm, 90.0);  // 90°
    delay(1000);
    set_servo_angle(arm, 180.0); // 180°
    delay(1000);

    // Clean up
    stop_servo(arm);
    close_all_servos();
    raspi_cleanup();
    return 0;
}
```

  </AccordionItem>
</Accordion>

---

# Build and Run

<Steps>
  
1. **Create your project folder**  
    
    ```bash
    mkdir ServoControl
    cd ServoControl
    ```

2. **Add your source file**
   Save the code above as `servo_control.cpp`.

3. **Compile**

   ```bash
    g++ servo_control.cpp -o servo_control -l splashkit
   ```

4. **Run**

   ```bash
    sudo ./servo_control
   ```

</Steps>

## Expected Outcome

After running the program:

1. The console will prompt “Press Enter to start…”.

2. Once you hit Enter, you’ll see “Sweeping through 0°, 90°, 180°…”.

3. The servo horn will move to 0°, pause for 1 s; then to 90°, pause; then to 180°, pause.

4. After the sweep, the servo will stop and all GPIO resources will be cleaned up.

You should observe smooth, accurate positioning corresponding to each angle command.
